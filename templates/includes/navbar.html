{% load static %}
{% block content %}

<header class="header-area header-style-1 header-height-2">
    <div class="header-top header-top-ptb-1 d-none d-lg-block">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-xl-3 col-lg-4">
                    <div class="header-info">
                        <ul>
                            <li><i class="fi-rs-smartphone"></i> <a href="#" style="display: inline;">(+91)-9633327588</a></li>

                            <li><i class="fi-rs-marker"></i><a
                                    href="{% static 'page-contact.html' %}">Our
                                    location</a></li>
                        </ul>
                    </div>
                </div>
                <div class="col-xl-6 col-lg-4">
                    <div class="text-center">
                        <div id="news-flash" class="d-inline-block">
                            <ul>
                                <li>Get great devices up to 50% off <a
                                        href="{% static 'shop-grid-right.html' %}">View
                                        details</a></li>
                                <li>Super Value Deals - Save more with coupons</li>
                                <li>Trendy 25silver jewelry, save up 35% off
                                    today <a
                                        href="{% static 'shop-grid-right.html' %}">Shop
                                        now</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
                <div class="col-xl-3 col-lg-4">
                    <div class="header-info header-info-right">
                        <ul>
                            
                            {% if user.id is none %}
                            <li>Welcome User</li>   
                            <li><i class="fi-rs-user"></i><a href="{% url 'user_login' %}">Log In</a>
                                <span>| |</span>
                          <a href="{% url 'register' %}"> Sign Up</a>  </i></li>
                          {%  else %}
                          <li>Welcome {{user.first_name}} !</li>
                          <li><i class="fi-rs-user"></i><a href="{% url 'dashboard' %}">Dashboard</a>
                              <span>| |</span>
                        <a href="{% url 'logout' %}">Logout</a>  </i></li>
                        {% endif %}
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="header-middle header-middle-ptb-1 d-none d-lg-block"
        style="height :130px">
        <div class="container">
            <div class="header-wrap">
                <div class="logo logo-width-1">
                    <a href="index.html"><img
                            src="{% static 'assets/imgs/theme/plantopia.png' %}"
                            alt="logo"></a>
                </div>


                <div class="header-right">
                    <div class="search-style-2">
                        <form class="searchBar" action="" method="GET">
                            <input type="text" placeholder="Search for items..." name="keyword" id="search-input">
                            <div id="suggestions" class="suggestions-dropdown"></div>
                        </form>
                    </div>


                    <div class="header-action-right">
                        <div class="header-action-2">
                            <div class="header-action-icon-2">
                                <a href="{% url 'wishlist' %}">
                                    <img class="svgInject" alt="Evara"
                                        src="{% static 'assets/imgs/theme/icons/icon-heart.svg' %}">
                                    <span class="pro-count blue">{{ wishlist_count }}</span>
                                </a>
                            </div>
                            <div class="header-action-icon-2">
                                <a class="mini-cart-icon" href="{% url 'cart' %}">
                                    <img alt="Evara"
                                        src="{% static 'assets/imgs/theme/icons/icon-cart.svg' %}">
                                     <span class="pro-count blue">{{ cart_count }}</span> 
                                </a>
                                
                            </div> 
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    <div class="header-bottom header-bottom-bg-color sticky-bar">
        <div class="container">
            <div class="header-wrap header-space-between position-relative">
                <div class="logo logo-width-1 d-block d-lg-none">
                    <a href="{% url 'home' %}"><img
                            src="{% static 'assets/imgs/theme/logo.svg' %}"
                            alt="logo"></a>
                </div>
                <div class="header-nav d-none d-lg-flex">
                    <div class="main-categori-wrap d-none d-lg-block">
                        <a class="categori-button-active" href="#">
                            <span class="fi-rs-apps"></span> Browse Categories
                        </a>
                        <div
                            class="categori-dropdown-wrap categori-dropdown-active-large">
                            <ul>
                                <li><a href="{% url 'store' %}"><i
                                    class="evara-font-desktop"></i>All Categories
                               </a></li>
                                {% for Catagory in links  %}
                                <li><a href="{{ Catagory.get_url }}"><i
                                            class="evara-font-desktop"></i>{{ Catagory.catagory_name }}
                                       </a></li>
                                {% endfor %}                                
                            </ul>                            
                        </div>
                    </div>
                    <div
                        class="main-menu main-menu-padding-1 main-menu-lh-2 d-none d-lg-block">
                        <nav>
                            <ul>
                                 <li><a class="active" href="{% url 'home' %}">Home 
                                   </a> 
                                </li>
                                <li>
                                    <a href="page-about.html">About</a>
                                </li>
                                <li><a href="{% url 'store' %}">Shop </a>                           
                                </li>                                                                
                                <li>
                                    <a href="page-contact.html">Contact</a>
                                </li>
                            </ul>
                        </nav>
                    </div>
                </div>
                <div class="hotline d-none d-lg-block">
                    <p><i class="fi-rs-headset"></i><span>Hotline</span> 1900 -
                        888 </p>
                </div>
                <p class="mobile-promotion">Happy <span class="text-brand">Mother's
                        Day</span>. Big Sale Up to 40%</p>
                <div class="header-action-right d-block d-lg-none">
                    <div class="header-action-2">
                        <div class="header-action-icon-2">
                            <a href="shop-wishlist.html">
                                <img alt="Evara"
                                    src="{% static 'assets/imgs/theme/icons/icon-heart.svg' %}">
                                <span class="pro-count white">4</span>
                            </a>
                        </div>
                        <div class="header-action-icon-2">
                            <a class="mini-cart-icon" href="shop-cart.html">
                                <img alt="Evara"
                                    src="{% static 'assets/imgs/theme/icons/icon-cart.svg' %}">
                                <span class="pro-count white">2</span>
                            </a>
                            <div class="cart-dropdown-wrap cart-dropdown-hm2">
                                <ul>
                                    <li>
                                        <div class="shopping-cart-img">
                                            <a href="shop-product-right.html"><img
                                                    alt="Evara"
                                                    src="{% static 'assets/imgs/shop/thumbnail-3.jpg' %}"></a>
                                        </div>
                                        <div class="shopping-cart-title">
                                            <h4><a
                                                    href="shop-product-right.html">Plain
                                                    Striola Shirts</a></h4>
                                            <h3><span>1 × </span>$800.00</h3>
                                        </div>
                                        <div class="shopping-cart-delete">
                                            <a href="#"><i
                                                    class="fi-rs-cross-small"></i></a>
                                        </div>
                                    </li>
                                    <li>
                                        <div class="shopping-cart-img">
                                            <a href="shop-product-right.html"><img
                                                    alt="Evara"
                                                    src="{% static 'assets/imgs/shop/thumbnail-4.jpg' %}"></a>
                                        </div>
                                        <div class="shopping-cart-title">
                                            <h4><a
                                                    href="shop-product-right.html">Macbook
                                                    Pro 2022</a></h4>
                                            <h3><span>1 × </span>$3500.00</h3>
                                        </div>
                                        <div class="shopping-cart-delete">
                                            <a href="#"><i
                                                    class="fi-rs-cross-small"></i></a>
                                        </div>
                                    </li>
                                </ul>
                                <div class="shopping-cart-footer">
                                    <div class="shopping-cart-total">
                                        <h4>Total <span>$383.00</span></h4>
                                    </div>
                                    <div class="shopping-cart-button">
                                        <a href="shop-cart.html">View cart</a>
                                        <a href="shop-checkout.html">Checkout</a>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="header-action-icon-2 d-block d-lg-none">
                            <div class="burger-icon burger-icon-white">
                                <span class="burger-icon-top"></span>
                                <span class="burger-icon-mid"></span>
                                <span class="burger-icon-bottom"></span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
{% comment %} <style>
    .searchBar{
        display: flex;
        flex-direction: column;
    }
    #suggestions ul li{
        background-color: rgb(216, 217, 220);
        color: black;
    }
</style>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
<script>
    $(document).ready(function() {
        var searchInput = $('#search-input');
        var suggestionsDiv = $('#suggestions');

        searchInput.on('input', function() {
            var term = $(this).val();
            if (term.length >= 1) {
                fetchSuggestions(term);
            } else {
                suggestionsDiv.empty().hide();
            }
        });

        function fetchSuggestions(term) {
            $.ajax({
                url: '/store/search_suggestions/',
                data: { 'term': term },
                success: function(data) {
                    showSuggestions(data.suggestions);
                }
            });
        }

        function showSuggestions(suggestions) {
            suggestionsDiv.empty();
            if (suggestions.length > 0) {
                suggestionsDiv.show();
                suggestionsDiv.addClass('search-style-2'); // Add the class to apply the styles
                var suggestionsList = $('<ul>');
        
                suggestions.forEach(function(suggestion) {
                    var suggestionItem = $('<li>' + suggestion + '</li>');
                    suggestionItem.on('click', function() {
                        searchInput.val(suggestion);
                        suggestionsDiv.hide();
                    });
        
                    suggestionsList.append(suggestionItem);
                });
        
                suggestionsDiv.empty().append(suggestionsList);
                var searchBarOffset = searchInput.offset();
                suggestionsDiv.css({
                    top: searchBarOffset.top + searchInput.outerHeight(),
                    left: searchBarOffset.left,
                    maxWidth: searchInput.outerWidth()
                });
            } else {
                suggestionsDiv.empty().hide();
            }
        }
        

        // Hide suggestions when clicking outside the search input or suggestions
        $(document).on('click', function(event) {
            if (!searchInput.is(event.target) && !suggestionsDiv.is(event.target) && suggestionsDiv.has(event.target).length === 0) {
                suggestionsDiv.hide();
            }
        });
});
</script>  {% endcomment %}
{% endblock %}

